<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Insert title here.</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/common.css" />
        <link rel="stylesheet" href="/css/tab-area.css" />
        <link rel="stylesheet" href="/css/pages/tech-info/tech-info.css" />
        <script type="text/javascript" src="/js/components/top-nav.js"></script>
        <script type="text/javascript" src="/js/components/button.js"></script>
        <script type="text/javascript" src="/js/components/tab.js"></script>
        <script type="text/javascript" src="/js/components/footer.js"></script>
        <script
            type="text/javascript"
            src="/js/components/tab-area.js"
        ></script>
        <script
            type="text/javascript"
            src="/js/components/text-field.js"
        ></script>
        <script
            type="text/javascript"
            src="/js/components/pagination.js"
        ></script>
        <link rel="stylesheet" href="/css/top-nav.css" />
    </head>
    <body>
        <top-nav focus="2"></top-nav>
        <tab-area>
            <tab-introduction-container>
                <tab-introduction-content>
                    천안아산강소특구의<br />
                    특화 분야 기술을 소개합니다.
                </tab-introduction-content>
                <tab-introduction-content>
                    천안아산강소특구의<br />
                    우수기술을 소개합니다.
                </tab-introduction-content>
                <tab-introduction-content>
                    천안아산강소특구의<br />
                    기술홍보영상을 소개합니다.
                </tab-introduction-content>
                <tab-introduction-content>
                    천안아산강소특구의<br />
                    특화 분야 기술동향입니다.
                </tab-introduction-content>
            </tab-introduction-container>
            <tab-container>
                <tab-default type="primary">기술검색</tab-default>
                <tab-default type="primary">우수기술</tab-default>
                <tab-default type="primary">기술영상</tab-default>
                <tab-default type="primary">기술동향</tab-default>
            </tab-container>
        </tab-area>
        <tab-content-area>
            <tab-content id="content1">
                <img class="top-img" src="" alt="" />
                <div class="content-wrapper">
                    <textfield-search
                        size="l"
                        placeholder="검색어를 입력하세요"
                    ></textfield-search>
                    <div class="post-container"></div>
                    <pagination-container> </pagination-container>
                </div>
            </tab-content>
            <tab-content id="content2">
                <img class="top-img" src="" alt="" />
                <div class="content-wrapper">
                    <textfield-search
                        size="l"
                        placeholder="검색어를 입력하세요"
                    ></textfield-search>
                    <div class="post-container"></div>
                    <pagination-container>
                        <pagination-arrow direction="left"></pagination-arrow>
                        <pagination-unit link="/1">1</pagination-unit>
                        <pagination-unit state="focus">2</pagination-unit>
                        <pagination-unit>3</pagination-unit>
                        <pagination-unit>4</pagination-unit>
                        <pagination-unit>5</pagination-unit>
                        <pagination-arrow direction="right"></pagination-arrow>
                    </pagination-container>
                </div>
            </tab-content>
            <tab-content id="content3">
                <img class="top-img" src="" alt="" />
                <div class="content-wrapper">
                    <div class="post-container">
                        <div class="post-wrapper">
                            <img
                                class="post-img"
                                src="/image/empty-thumbnail.png"
                                alt=""
                            />
                            <div class="post-detail-wrapper">
                                <span class="post-detail-ti body-bd"
                                    >도로구조물의 신축이음구조 및 이의
                                    시공방법</span
                                >
                                <span class="post-detail-date body-me">
                                    YY.MM.DD
                                </span>
                            </div>
                        </div>
                    </div>
                    <pagination-container>
                        <pagination-arrow direction="left"></pagination-arrow>
                        <pagination-unit link="/1">1</pagination-unit>
                        <pagination-unit state="focus">2</pagination-unit>
                        <pagination-unit>3</pagination-unit>
                        <pagination-unit>4</pagination-unit>
                        <pagination-unit>5</pagination-unit>
                        <pagination-arrow direction="right"></pagination-arrow>
                    </pagination-container>
                </div>
            </tab-content>
            <tab-content id="tech-trend">
                <img class="top-img" src="" alt="" />
                <div class="content-wrapper">
                    <div class="post-container">
                        <div class="post-wrapper">
                            <img
                                class="post-img"
                                src="/image/empty-thumbnail.png"
                                alt=""
                            />
                            <div class="post-detail-wrapper">
                                <span class="post-title title-bd"
                                    >글로벌 시장동향 보고서</span
                                >
                                <span class="post-content body-me"
                                    >연구개발특구진흥재단 사이트 내 유망
                                    기술시장 정보제공 페이지로 이동합니다.</span
                                >
                                <div class="button-wrapper">
                                    <button-default
                                        style_="outline"
                                        onclick="location.href='https://www.innopolis.or.kr/board?menuId=MENU00999&siteId=null'"
                                        >보러가기</button-default
                                    >
                                </div>
                            </div>
                        </div>
                        <div class="post-wrapper">
                            <img
                                class="post-img"
                                src="/image/empty-thumbnail.png"
                                alt=""
                            />
                            <div class="post-detail-wrapper">
                                <span class="post-title title-bd"
                                    >산업동향 분석</span
                                >
                                <span class="post-content body-me"
                                    >국내외의 산업·기술과 관련된 실물경제의
                                    동향과 정보를 확인하실 수 있습니다.</span
                                >
                                <div class="button-wrapper">
                                    <button-default
                                        style_="outline"
                                        onclick="location.href='https://www.katech.re.kr/page/07090450-89fd-4a3f-8373-ee74cbb3e738'"
                                        >보러가기</button-default
                                    >
                                </div>
                            </div>
                        </div>
                        <div class="post-wrapper">
                            <img
                                class="post-img"
                                src="/image/empty-thumbnail.png"
                                alt=""
                            />
                            <div class="post-detail-wrapper">
                                <span class="post-title title-bd"
                                    >모빌리티 인사이트</span
                                >
                                <span class="post-content body-me"
                                    >자동차 기술 및 산업 트렌드 이슈 분석을
                                    이곳에서 만나보실 수 있습니다.</span
                                >
                                <div class="button-wrapper">
                                    <button-default
                                        onclick="location.href='https://www.katech.re.kr/page/07090450-89fd-4a3f-8373-ee74cbb3e738'"
                                        style_="outline"
                                        >보러가기</button-default
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </tab-content>
        </tab-content-area>
        <footer-default></footer-default>
    </body>
    <script>
        // search tech
        let posts1;
        let keyword1 = '';
        const postContainer1 = document.querySelector(
            `#content1 div.post-container`,
        );
        const searchBar1 = document.querySelector(`#content1 textfield-search`);
        const paginationContainer1 = document.querySelector(
            `#content1 pagination-container`,
        );
        searchBar1.addEventListener('keydown', (e) => {
            if (e.keyCode == 13) {
                keyword1 = searchBar1.getValue();
                setPage1(1);
            }
        });

        const setPage1 = (page) => {
            const currentPosts = posts1.filter(({ title }) =>
                title.includes(keyword1),
            );
            paginationContainer1.innerHTML =
                new Array(Math.ceil(currentPosts.length / 12))
                    .fill(0)
                    .reduce((acc, _, idx) => {
                        return (
                            acc +
                            `<pagination-unit link="javascript:setPage1(${
                                idx + 1
                            })" state="${
                                idx + 1 === page ? 'focus' : 'default'
                            }">${idx + 1}</pagination-unit>`
                        );
                    }, `<pagination-arrow direction="left"></pagination-arrow>`) +
                `<pagination-arrow direction="right"></pagination-arrow>`;
            postContainer1.innerHTML = currentPosts
                .slice(12 * (page - 1), 12 * page)
                .reduce((acc, post, idx) => {
                    return (
                        acc +
                        `
                    <div
                        class="post-wrapper"
                        onclick="location.href='/html/pages/search-tech-detail.html?idx=${idx}'"
                    >
                        <img class="post-img" src="/image/empty-thumbnail.png" alt="" />
                        <div class="post-detail-wrapper">
                                <span class="post-detail-subti body-me">
                                    ${post.detail.발명자}
                                </span>
                            <span class="post-detail-ti body-bd"
                                >${post.title}</span
                            >
                            <div class="post-detail-hashtag-wrapper body-me">
                                <span class="post-detail-hashtag">출원번호 ${post.detail.출원번호}</span>
                            </div>
                        </div>
                    </div>
                `
                    );
                }, '');
        };
        (async function () {
            const res = await fetch(
                '/resources/pages/tech-info/search-tech.json',
            );
            posts1 = await res.json();
            setPage1(1);
        })();

        // great tech
        let posts2;
        let keyword2 = '';
        const postContainer2 = document.querySelector(
            `#content2 div.post-container`,
        );
        const searchBar2 = document.querySelector(`#content2 textfield-search`);
        const paginationContainer2 = document.querySelector(
            `#content2 pagination-container`,
        );
        searchBar2.addEventListener('keydown', (e) => {
            if (e.keyCode == 13) {
                keyword2 = searchBar2.getValue();
                setPage2(1);
            }
        });

        const setPage2 = (page) => {
            const currentPosts = posts2.filter(({ title }) =>
                title.includes(keyword2),
            );
            paginationContainer2.innerHTML =
                new Array(Math.ceil(currentPosts.length / 12))
                    .fill(0)
                    .reduce((acc, _, idx) => {
                        return (
                            acc +
                            `<pagination-unit link="javascript:setPage2(${
                                idx + 1
                            })" state="${
                                idx + 1 === page ? 'focus' : 'default'
                            }">${idx + 1}</pagination-unit>`
                        );
                    }, `<pagination-arrow direction="left"></pagination-arrow>`) +
                `<pagination-arrow direction="right"></pagination-arrow>`;

            postContainer2.innerHTML = posts2.reduce((acc, post, idx) => {
                if (
                    idx < 12 * (page - 1) ||
                    idx >= 12 * page ||
                    !post.title.includes(keyword2)
                ) {
                    return acc;
                }
                return (
                    acc +
                    `
                    <div
                        class="post-wrapper"
                        onclick="location.href='/html/pages/great-tech-detail.html?idx=${idx}'"
                    >
                        <img class="post-img" src="https://innopolis-katech.re.kr/${
                            post.img ?? '/image/empty-thumbnail.png'
                        }" alt="" />
                        <div class="post-detail-wrapper">
                            <span class="post-detail-subti body-me">${
                                post.type
                            }</span>
                            <span class="post-detail-ti body-bd"
                                >${post.title}</span
                            >
                            <div class="post-detail-hashtag-wrapper body-me">
                                ${post.tags.reduce((acc, tag) => {
                                    return (
                                        acc +
                                        `
                                        <span class="post-detail-hashtag">#${tag}</span>
                                    `
                                    );
                                }, '')}
                            </div>
                        </div>
                    </div>
                `
                );
            }, '');
        };
        (async function () {
            const res = await fetch(
                '/resources/pages/tech-info/great-tech.json',
            );
            posts2 = await res.json();
            setPage2(1);
        })();

        let posts3;
        const postContainer3 = document.querySelector(
            `#content3 div.post-container`,
        );
        const paginationContainer3 = document.querySelector(
            `#content3 pagination-container`,
        );
        const setPage3 = (page) => {
            paginationContainer3.innerHTML =
                new Array(Math.ceil(posts3.length / 12))
                    .fill(0)
                    .reduce((acc, _, idx) => {
                        return (
                            acc +
                            `<pagination-unit link="javascript:setPage3(${
                                idx + 1
                            })" state="${
                                idx + 1 === page ? 'focus' : 'default'
                            }">${idx + 1}</pagination-unit>`
                        );
                    }, `<pagination-arrow direction="left"></pagination-arrow>`) +
                `<pagination-arrow direction="right"></pagination-arrow>`;

            postContainer3.innerHTML = posts3.reduce((acc, post, idx) => {
                if (idx < 12 * (page - 1) || idx >= 12 * page) {
                    return acc;
                }
                return (
                    acc +
                    `
                    <div class="post-wrapper" onclick="location.href='${
                        post.link
                    }'">
                            <img
                                class="post-img"
                                src="${post.img}"
                                alt=""
                            />
                            <div class="post-detail-wrapper">
                                <span class="post-detail-ti body-bd"
                                      >${post.title}</span
                                >
                                <span class="post-detail-date body-me">
                                    ${post.date.split(' ')[0]}
                                </span>
                            </div>
                        </div>
                `
                );
            }, '');
        };
        (async function () {
            const res = await fetch(
                '/resources/pages/tech-info/tech-video.json',
            );
            posts3 = await res.json();
            setPage3(1);
        })();
    </script>
</html>
