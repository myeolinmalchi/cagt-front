<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Insert title here.</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/common.css" />
        <link
            rel="stylesheet"
            href="/css/pages/customer-support/notice-detail.css"
        />
        <link rel="stylesheet" href="/css/top-nav.css" />
        <script type="text/javascript" src="/js/components/top-nav.js"></script>
        <script type="text/javascript" src="/js/components/button.js"></script>
        <script type="text/javascript" src="/js/components/footer.js"></script>
    </head>
    <body>
        <top-nav focus="5"></top-nav>
        <div class="detail-container"></div>
        <footer-default></footer-default>
        <script>
            let post;
            const contentWrapper = document.querySelector(
                'div.detail-container',
            );
            const render = () => {
                contentWrapper.innerHTML = `
            <span class="title-bd">
                <span class="notice-secondary body-bd">접수 마감</span>
                ${post.title}
            </span>
            <span class="body-me">${post.date}</span>
            <span class="body-me"
                >${post.content}</span
            >
                        <div class="button-container" style="margin-bottom: 0px">
                <button-default
                    style_="primary"
                    size="xl"
                    icon="right"
                >
                    신청하기
                </button-default>
            </div>
            <div class="file-container">
                ${post.files.reduce((acc, file) => {
                    return (
                        acc +
                        `
                        <div>
                            <div></div>
                            <div>
                                <span class="body-bd"
                                    >${file.name}</span
                                >
                                <span class="body-me">${file.size}</span>
                            </div>
                            <button-text style_="secondary" onclick="location.href='${file.link}'">다운로드</button-text>
                        </div>
                    `
                    );
                }, '')}
            </div>
            <div class="button-container">
                <button-default
                    style_="outline"
                    onclick="location.href='/html/pages/customer-support.html'"
                    >목록으로</button-default
                >
            </div>
                    
                `;
            };
            window.onload = async () => {
                const urlParams = new URLSearchParams(window.location.search);
                const index = urlParams.get('idx');
                const res = await fetch(
                    '/resources/pages/customer-support/business-announcement.json',
                );
                const posts = await res.json();
                post = posts[index];
                render();
            };
        </script>
    </body>
</html>
